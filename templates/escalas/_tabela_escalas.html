<div class="overflow-x-auto">
    <table class="w-full bg-white rounded-lg shadow overflow-hidden">

        <thead class="bg-slate-100 text-slate-600 text-sm uppercase">
            <tr>
                <th class="px-4 py-3 text-left">Data</th>
                <th class="px-4 py-3 text-left">Turno</th>
                <th class="px-4 py-3 text-left">Residente</th>
                <th class="px-4 py-3 text-left">Tipo</th>
                <th class="px-4 py-3 text-right">Ações</th>
            </tr>
        </thead>

        <tbody class="divide-y text-sm">
            {% for escala in escalas %}
            <tr class="hover:bg-slate-50 transition">

                <td class="px-4 py-3 font-medium">
                    {{ escala.data|date:"d/m/Y" }}
                </td>

                <td class="px-4 py-3">
                    <span class="px-2 py-1 rounded text-xs font-medium bg-slate-100 text-slate-700">
                        {{ escala.turno.nome }}
                    </span>
                </td>

                <td class="px-4 py-3">
                    {{ escala.usuario.username }}
                </td>

                <td class="px-4 py-3">
                    <span class="inline-block px-2 py-0.5 rounded text-xs bg-slate-200 text-slate-700 uppercase">
                        {{ escala.usuario.role }}
                    </span>
                </td>

                <td class="px-4 py-3 text-right">
                    {% if request.user == escala.usuario or request.user.is_admin %}
                        <form 
                            hx-post="{% url 'remover_escala' escala.id %}"
                            hx-target="#tabela-escalas"
                            hx-swap="innerHTML"
                            hx-confirm="Remover esta escala?"
                            class="inline"
                        >
                            {% csrf_token %}
                            <button
                                type="submit"
                                class="inline-flex items-center gap-1 text-red-600 hover:text-red-700 font-medium text-sm"
                            >
                                Remover
                            </button>
                        </form>
                    {% else %}
                        <span class="text-slate-400">—</span>
                    {% endif %}
                </td>

            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="px-4 py-6 text-center text-slate-500">
                    Nenhuma escala cadastrada.
                </td>
            </tr>
            {% endfor %}
        </tbody>

    </table>
</div>
