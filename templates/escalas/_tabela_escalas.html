<table>
    <thead>
        <tr>
            <th>Data</th>
            <th>Turno</th>
            <th>Residente</th>
            <th>Tipo</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for escala in escalas %}
        <tr>
            <td>{{ escala.data|date:"d/m/Y" }}</td>
            <td>{{ escala.turno.nome }}</td>
            <td>{{ escala.usuario.username }}</td>
            <td>{{ escala.usuario.role }}</td>
            <td>
                {% if request.user == escala.usuario or request.user.is_admin %}

                <form 
                    hx-post="{% url 'remover_escala' escala.id %}"
                    hx-target="#tabela-escalas"
                    hx-swap="innerHTML"
                    hx-confirm="Remover esta escala?"
                >
                    {% csrf_token %}
                    <button
                        class="btn btn-danger"
                    >
                        Remover
                    </button>
                </form>
                {% else %}
                —
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">Nenhuma escala cadastrada.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>